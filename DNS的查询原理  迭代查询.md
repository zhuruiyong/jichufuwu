```
更改ip  
```

nmcli  connection

nmcli  connection delete  ens33

删除ens33

nmcli  connection add  type ethernet ifname  ens33  con-name  ens33

添加网络ens33

nmcli connection modify  ens33  ipv4.addresses  192.168.10.1/24

添加IP192.168.10.1和掩码

nmcli connection modify  ens33  ipv4.gateway  192.168.10.1

添加网关

nmcli connection modify  ens33  ipv4.method  manual

启用ens33

systemctl restart network

scp  /etc/yum.repos.d/C*  root@192.168.10.2  /etc/yum.repos.d/

firewall-cmd  --add-service=nfs --permanent 

firewall-cmd --add-port=80/tcp --permanent

firewall-cmd --reload

firewall-cmd --list-all

```
DNS  域名解析服务器
```

域名 www.baidu.com

hosts  本地   不太安全

NIS     可以将hosts和password进行绑定

FQDN  完整的限定域名  www.baidu.com.

## DNS的查询原理  迭代查询

从本地上面查询    ----ldns （网络供应商） ---一级域名（.com .org .edu） ---二级域名  ---三级域名

dns相当于网络上的 地址数据库，里面存放着ip和域名

## 自己搭建的dns

主域名服务器   从域名解析服务器  缓存域名解析服务器

bind   支持多平台  centos7  bind-9  里面存放的是程序和一些相关的文件

bind-utils  存放的是dns的测试文件

bind-chroot  可以伪装根目录

检测dns是否成功   nslookup  dig

bind主配置文件

/etc/named.conf

bind区域配置文件

/etc/named.rfc1912.zones

数据库文件

/var/named

数据库文件中记录类型

TTL  缓存时间

SOA  起始授权记录

NS  域名

A  对应ipv4地址

PTR  用于反向解析

CNAMRE  记录别名

MX  记录邮件

AAAA  ipv6地址

## DNS主域名解析服务器

1.安装bind

 cd /media/Packages/

rpm -ivh bind-9.9.4-37.el7.x86_64.rpm 

查看

rpm -qa |  grep  bind

修改配置文件

vim /etc/named.conf

listen-on port 53 { any; };

allow-query     { any; };

vim /etc/named.rfc1912.zones

cd /var/named/

cp  -p  named.localhost  kgc.com.zone

cp -p named.localhost   192.168.10.arpa

vim kgc.com.zone

$TTL 1D  
@	IN SOA  kgc.com.   root.kgc.com. (
					2019111901	; serial
					1D	; refresh
					1H	; retry
					1W	; expire
					3H )	; minimum
	NS	@
	A	127.0.0.1
	AAAA	::1
www     A 	192.168.10.1
qqq   	CNAME	www

$TTL 1D  有效地址的缓存记录时间

@		代表本机

​	IN SOA  kgc.com.   域名

root.kgc.com.   管理员的邮箱

(
2019111901(序列号 10位）	; serial
1D	; refresh   刷新时间  针对从

1H	; retry	重试时间 如果更新地址数据库失败 多久后重试
1W	; expire
					3H )	; minimum
	NS	@
	A	127.0.0.1
	AAAA	::1
www     A 	192.168.10.1
qqq   	CNAME	www

vim  192.168.10.arpa

$TTL 1D
@	IN SOA	kgc.com. root.kgc.com. (
					2019111901	; serial
					1D	; refresh
					1H	; retry
					1W	; expire
					3H )	; minimum
	NS	@
	A	127.0.0.1
	AAAA	::1
1      PTR     www.kgc.com.

## 查看是否报错

named-checkconf /etc/named.conf 

named-checkconf /etc/named.rfc1912.zones 

named-checkzone kgc.com  192.168.10.arpa

vim /etc/resolv.conf

```
#Generated by NetworkManager
nameserver 192.168.10.1
```

nslookup 解析