## 数据库

数据库的特点：实现数据共享，减少数据冗余；采用特定的数据类型；具有较高的数据独立性；具有统一的数据控制功能。

表：在关系型数据库中，数据库的表是一系列二维数组的集合，用来存储数据和操作数据的逻辑结构。它是由纵向的列和横向的行组成，行被称为记录，是组织数据的单位；列被称为字段，每一列表示记录的一个属性，都有相应的描述信息。

数据类型:数据类型决定了数据在计算机中的存储格式，代表不同的信息类型。常用的数据类型有：整数数据类型、浮点数数据类型、精确小数类型、二进制数据类型、日期/随时间数据类型、字符串数据类型

主键（Primary Key）：用于唯一的标识表中的每一条记录。可以定义表中的一列或多列为主键。主键列上不能有两行相同的值，也不能为空值

数据可技术构成：数据库系统由硬件部分和软件部分共同构成，硬件主要用于存储数据库中的数据，包括计算机、存储设备等。软件部分则主要包括DBMS、支持DBMS运行的操作系统，以及支持多种语言进行应用开发的访问技术等。

数据库系统由3个主要的组成部分：

数据库：用于存储数据的地方

数据库管理系统：用于管理数据库的软件

数据库应用程序：

## SQL语言

对数据库进行查询和修改操作的语言叫做sql

sql语言包含4部分

1.数据定义语言  DDL（Data Defination language）:CREATE创建、ALTER修改、DROP删除（针对库和表而言）

2.数据操作语言	DML(Data Manipulation Language)： INSERT写入 、   UPDATE修改、	DELETE删除（针对数据）

3.数据查询语言	DQL(Data  Query  Language)： SELECT查询（针对数据）

4.数据控制语言	DCL(Data Control Language)：GRANT授权	、REVOKE收回授权、	ROLLBACK回滚	、COMMIT提交（针对用户或者功能的控制）

## 查看当前mysql版本的命令

select version();

## mysql的优点

1.速度快

2.开源免费

3.移植性强

4.客户端语言多

5.功能丰富

6.安全性和连续性

查看当前数据库的命令

show  databases;

分号（;）作为mysql中的结束符，mysql不止只有一个结束符还有\g等同于分号和\G去掉表结构的方式，使数据以更直观的方式进行呈现

切换mysql 的结束符

delimiter	要使用的结束符

information_schema:mysql中的信息库，用于存放所有mysql维护的库信息以及表的信息

mysql：记录了mysql中所有用户信息，包含权限，关键字，密码等相关信息

performance_schema：5.5版本之后推出的库，用于收集服务器性能参数

test：测试库（作为测试库生产环境中，不会向该库存放重要信息）

创建数据库相当于在磁盘上划分一块区域用于数据的存放和管理

## 创建数据库的命令

create database 数据库名

## 删除数据库的命令

删除数据库时，数据库中的表和数据会随着库的删除而一并删除，所以删库要慎重（否则，容易获赔60万，打断腿）

drop database 数据库名

## 					存储引擎

属于mysql底层组件，提供mysql的增删改查，使用不同的存储引擎可以得到不同的功能，例如使用的索引类型，事务的支持与否，或者锁定功能等等都要根据不同存储引擎来决定，

属于mysql的核心

查看当前mysql拥有那些存储引擎的命令

show	engines\G

```
      Engine: InnoDB	引擎名
     Support: DEFAULT	mysql是否支持该种引擎
     Comment: Supports transactions, row-level locking, and foreign keys		mysql对该种引擎的描述
Transactions: YES		是否支持事物
          XA: YES		是否支持分布式事务
  Savepoints: YES		是否支持事务保存点

mysql> show variables like 'default_storage_engine';	#查看当前默认存储引擎
show  variables	like	'参数'	#查看,系统参数的工具存储引擎
```

一旦选择了存储引擎就表示存放数据的格式，不同存储引擎使用的功能不相同，占用的空间也不相同，每个表都将有且仅有一个存储引擎与之对应

MylSAM存储引擎特点：

（1）在mysql5.5版本之前属于默认存储引擎，之后由InnoDB进行替代

（2）MyISAM存储引擎读取效率高，占用资源少，不支持事务，不支持外键，支持全文索引

（3）读写相互阻塞

（4）只能缓存索引，不能缓存数据 

MyISAM适用场景

（1）不支持事务的业务

（2）适用于读取数据较多的业务，不适用于写频繁的业务

（3）并发较低的业务

（4）硬件资源差的服务器可以使用

InnoDB特点

（1）既能缓存索引，又能缓存数据

  (2) 支持事务，支持外键，支持行级别锁定，且属于5.5版本之后的默认存储

（3）具有提交回滚，崩溃恢复能力的事务安全存储引擎，可以支持较大并发量

（4）使用InnoDB时，会在数据目录下生成两个名字为ib_logfile0和ib_logfile1的5M大小的日志文件，和一个10M大小的自动扩展的名为ibdata1的数据文件

InnoDB的适用场景

（1）需要使用事务的业务

（2）数据更新频繁的业务

（3）数据一致性要求较高的业务

Memory特点

（1）将数据保存在内存中，方便快速的引用和查找

（2）Memory支持btree和hash索引，不支持建立blob和text列

（3）如果不需要memory表中的数据，直接清空表，或者删除掉该表可以快速释放内存中的空间

选择合适的存储引擎可以方便我们的使用，

```
InnoDB可以在使用淘宝，或者充值充值业务时进行使用，
MyISAM可以建立在黄页时进行使用，
Memory可以用于需要快速查询的数据时进行使用，比如用户用户会话
```

ibdata1存放所有使用InnoDB表中的数据以及索引信息（共享表空间）

## 										表的操作

create table 表名

​	（字段名	数据类型  [完整性约束条件]..

​		  字段名2	数据类型	[完整性约束条件]..);

什么是完整性约束条件?

约束条件指的是对字段进行限制，要求用户向字段中写入符合要求的数据，一旦用户写入的内容不符合要求，将会写入失败，为了保证数据的完整性

约束条件

primary key		标识该属性为该表的主键，用于唯一的标识对应的数据

foreign key			标识该属性为该表的外键，外键关联需要另外一表的主键

not  null				标识该属性不能为空值

unique					标识该属性值唯一

default					给该属性设置默认值

auto_increment		标识该属性的值自动增加



primary key	主键，标识表中的数据唯一且非空，且在一个表中只允许出现一个主键，适合给数据本身具有唯一非空性质的数据进行添加，例如身份证号

建立主键的语法

1.字段名	数据类型	primary key

2.在定义完所有的列之后建立主键

primary	key	（要定义主键的字段）

```
mysql> create database sjk;
Query OK, 1 row affected (0.00 sec)

mysql> use sjk;
Database changed
mysql> create table example1
    -> (s_id int primary key,
    -> s_name varchar(30),
    -> s_sex  char(3));
mysql> insert into example1 values (1,'user1','m');
mysql> insert into example1 values (1,'user1','m');
ERROR 1062 (23000): Duplicate entry '1' for key 'PRIMARY'
mysql> insert into example1 values (2,'user1','m');
Query OK, 1 row affected (0.00 sec)
mysql> create table example2(
    -> id int,
    -> name varchar(30),
    -> sex char(3),
    -> primary key(id));
Query OK, 0 rows affected (0.01 sec)
```

联合主键，当单个字段无法确定唯一值时，将多个字段放在一起建立主键

primary key （字段1，字段2...）

```
mysql> create table example3( name varchar(30), birth date, high int,weight int,address varchar(50),primary key (name,birth,high,weight,address));
Query OK, 0 rows affected (0.00 sec)
mysql> insert into example3 values ('user1','1991-01-01',180,85,'beijing');
Query OK, 1 row affected (0.00 sec)

mysql> insert into example3 values ('user1','1991-01-01',180,85,'beijing');
ERROR 1062 (23000): Duplicate entry 'user1-1991-01-01-180-85-beijing' for key 'PRIMARY'
mysql> insert into example3 values ('user2','1991-01-01',180,85,'beijing');
Query OK, 1 row affected (0.00 sec)

mysql> select * from example3;
+-------+------------+------+--------+---------+
| name  | birth      | high | weight | address |
+-------+------------+------+--------+---------+
| user1 | 1991-01-01 |  180 |     85 | beijing |
| user2 | 1991-01-01 |  180 |     85 | beijing |
+-------+------------+------+--------+---------+
2 rows in set (0.00 sec)
```

## 外键

外键用于建立表与表之间的联系，首先联系通过字段进行连接，一旦建立外键之后将会出现父子表，建立（含有）外键的表称之为子表，被晚间连接的表称之为父表，外键在一个表中可以有多列。

## 语法

```
[constraint	约束名] foreign key （定义外键的字段1 ,[字段 2...]）refetences  父表名 （父表主键列）

当填写数据时，父表中被关联的字段拥有某种数据，子表才能填写对应的数据
```

## 建立外键的原则

```
1.子表关联父表时，父表被关联的字段必须为主键
2.建立外键时，数据类型需要一致
3.当父表为联合主键时，需要从第一个字段开始关联，否则失败
4.书写问题
mysql> create table example4( s_id int, course_id int, grade decimal(8,2),primary key(s_id,course_id));
Query OK, 0 rows affected (0.01 sec)
mysql> create table example5(
    -> id int primary key,
    -> c_id int,name varchar(30),birth date,
    -> constraint fk_ex5 foreign key (id) references example4(course_id));
ERROR 1005 (HY000): Can't create table 'sjk.example5' (errno: 150)
mysql> create table example5( id int primary key, c_id int,name varchar(30),birth date, constraint fk_ex5 foreign key (id) references example4(s_id));
Query OK, 0 rows affected (0.00 sec)

mysql> insert into example5 values (1,20,'user1','1999-01-01');
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`sjk`.`example5`, CONSTRAINT `fk_ex5` FOREIGN KEY (`id`) REFERENCES `example4` (`s_id`))
mysql> insert into example4 values (1,20,80);
Query OK, 1 row affected (0.01 sec)

mysql> insert into example5 values (1,20,'user1','1999-01-01');
Query OK, 1 row affected (0.00 sec)

```

## 非空

在定义非空的字段中不允许写入空值

字段名	数据类型	not null

```
mysql> create table example6(id int not null);
Query OK, 0 rows affected (0.00 sec)

mysql> insert into example6 values (null);
ERROR 1048 (23000): Column 'id' cannot be null

```

## 唯一性约束条件

定义该条件的字段不允许写入重复值

语法

1  字段名	数据类型	unique

2[constraint	约束名 ]	unique	（定义唯一性条件的字段）

```
mysql> create table example7 (
    -> id int not null,
    -> name varchar(30) unique);
Query OK, 0 rows affected (0.00 sec)

mysql> insert into example7 values (1,'zhangsan');
Query OK, 1 row affected (0.01 sec)

mysql> insert into example7 values (2,'zhangsan');
ERROR 1062 (23000): Duplicate entry 'zhangsan' for key 'name'

mysql> create table example8( id int primary key, name varchar(30), constraint ex_uni unique (name));
Query OK, 0 rows affected (0.01 sec)

```

## 默认值

给字段预先设置默认值，如果不往该字段写入数据，mysql会将默认值填写到该字段中

字段名	数据类型	default	默认值

```
mysql> create table example9( id int primary key, name varchar(30) not null, address varchar(30) unique, game varchar(30) default 'LOL');
Query OK, 0 rows affected (0.00 sec)
mysql> insert into example9 (id,name,address) values (1,'xd','beijing');
Query OK, 1 row affected (0.00 sec)

mysql> select * from example9;
+----+------+---------+------+
| id | name | address | game |
+----+------+---------+------+
|  1 | xd   | beijing | LOL  |
+----+------+---------+------+
1 row in set (0.00 sec)

```



## 自增

给指定字段的值进行自动增加的操作，只能对数值进行增加，设置自增为了生成唯一的id值，一个表中只能有一个自增字段

语法

字段名	数据类型	auto_increment

```
mysql> create table example10( id int primary key auto_increment, name varchar(30) not null);
Query OK, 0 rows affected (0.00 sec)

mysql> create table example11( id int unique auto_increment, name varchar(30) not null);
Query OK, 0 rows affected (0.00 sec)

```



## 								修改表alter

## 1.修改表名

alter table  表名  rename[to] 新表名

如果在修改表名的前提下加上to表示可以实现表在库之间的迁移，还能在迁移的同时进行修改表名

```
mysql> show tables;
+-------------------+
| Tables_in_sjk0108 |
+-------------------+
| EXAMPLE1          |
+-------------------+
1 row in set (0.00 sec)

mysql> create table example1(id int primary key);
Query OK, 0 rows affected (0.00 sec)

mysql> create table example2(id int primary key);
Query OK, 0 rows affected (0.01 sec)

mysql> create table example3(id int primary key);
Query OK, 0 rows affected (0.00 sec)

mysql> create table example4(id int primary key);
Query OK, 0 rows affected (0.01 sec)

mysql> create table example5(id int primary key);
Query OK, 0 rows affected (0.01 sec)
[root@localhost ~]# vim rename.sh
#!/bin/bash
# change database name
mysql -uroot -e 'create database if not exists yjs0108'
list_table=$(mysql -uroot -Nse "select TABLE_NAME from information_schema.TABLES where TABLE_SCHEMA='sjk0108'")
    for table in $list_table
    do
    mysql -uroot -e "ALTER TABLE sjk0108.$table RENAME TO yjs0108.$table"
    done
chmod +x rename.sh
./rename.sh

N去掉表头    socket   e在命令行执行

mysql> show tables;
Empty set (0.00 sec)

mysql> use yjs0108;
Database changed
mysql> show tables;
+-------------------+
| Tables_in_yjs0108 |
+-------------------+
| EXAMPLE1          |
| example1          |
| example2          |
| example3          |
| example4          |
| example5          |
+-------------------+
6 rows in set (0.00 sec)

```



```
在mysql中不允许出现同名的库
在一个库中不允许出现同名的表
在一个表中不允许出现同名字段
在mysql中数据表的名字不能和命令一致否则报错
在mysql中库名表名进行大小写的区分，而字段不区分大小写
```

## 查看表结构的语法

desc	表名

describe	表名

查看详细表结构的语法

show  create table 表名\G

## 2.修改字段数据类型

alter table 表名  modify 字段名 新数据类型	[约束条件]

```
mysql> desc test1;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| id    | int(11)     | NO   | PRI | NULL    |       |
| name  | varchar(30) | NO   |     | NULL    |       |
| birth | date        | YES  | UNI | NULL    |       |
+-------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec)

mysql> alter table test1 modify name char(5);
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0
mysql> desc test1;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| s_id  | int(11) | NO   | PRI | 0       |       |
| name  | char(5) | YES  |     | NULL    |       |
| birth | date    | YES  | UNI | NULL    |       |
+-------+---------+------+-----+---------+-------+
3 rows in set (0.00 sec)

```



### 3.修改字段的名字

alter table 表名 change 旧字段名 新字段名 新数据类型	[约束条件]

```
mysql> desc test1;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| id    | int(11)     | NO   | PRI | NULL    |       |
| name  | varchar(30) | NO   |     | NULL    |       |
| birth | date        | YES  | UNI | NULL    |       |
+-------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec)
 at line 1
mysql> alter table test1 change id s_id int;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0
mysql> desc test1;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| s_id  | int(11) | NO   | PRI | 0       |       |
| name  | char(5) | YES  |     | NULL    |       |
| birth | date    | YES  | UNI | NULL    |       |
+-------+---------+------+-----+---------+-------+
3 rows in set (0.00 sec)

```

## 4.添加字段

alter table 表名 add 新字段名 新数据类型	[约束条件]	[first|AFTER  已经存在的字段]	

```
mysql> alter table test1 add address varchar(30) not null first;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc test1;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| address | varchar(30) | NO   |     | NULL    |       |
| s_id    | int(11)     | NO   | PRI | 0       |       |
| name    | char(5)     | YES  |     | NULL    |       |
| birth   | date        | YES  | UNI | NULL    |       |
+---------+-------------+------+-----+---------+-------+
4 rows in set (0.00 sec)

```

添加一个名字叫做s_sex的字段  数据类型为char(3)  非空约束条件将该字段添加到name字段的前面

```
mysql> alter table test1 add s_sex char(3) not null after s_id;
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0
mysql> desc test1;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| address | varchar(30) | NO   |     | NULL    |       |
| s_id    | int(11)     | NO   | PRI | 0       |       |
| s_sex   | char(3)     | NO   |     | NULL    |       |
| name    | char(5)     | YES  |     | NULL    |       |
| birth   | date        | YES  | UNI | NULL    |       |
+---------+-------------+------+-----+---------+-------+
5 rows in set (0.00 sec)

```

添加一个名叫phone字段，数据烈性为int，唯一性约束条件，添加到表的最后

```
mysql> alter table test1 add phone int unique;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc test1;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| address | varchar(30) | NO   |     | NULL    |       |
| s_id    | int(11)     | NO   | PRI | 0       |       |
| s_sex   | char(3)     | NO   |     | NULL    |       |
| name    | char(5)     | YES  |     | NULL    |       |
| birth   | date        | YES  | UNI | NULL    |       |
| phone   | int(11)     | YES  | UNI | NULL    |       |
+---------+-------------+------+-----+---------+-------+
6 rows in set (0.00 sec)

```

## 删除字段

alter 	table  表名	drop	字段名

如果删除指定字段，字段中的值将会随着字段的删除而删除

```
mysql> alter table test1 drop phone;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc test1;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| address | varchar(30) | NO   |     | NULL    |       |
| s_id    | int(11)     | NO   | PRI | 0       |       |
| s_sex   | char(3)     | NO   |     | NULL    |       |
| name    | char(5)     | YES  |     | NULL    |       |
| birth   | date        | YES  | UNI | NULL    |       |
+---------+-------------+------+-----+---------+-------+
5 rows in set (0.00 sec)
```

## 更改表中的存储引擎

alter table 表名 engine=要修改的存储引擎

如果修改存储引擎需要注意由于存储引擎的修改而导致的功能不能使用的问题

```
mysql> show create table test1\G
mysql> alter table test1 engine=memory;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0
mysql> show create table test1\G
*************************** 1. row ***************************
       Table: test1
Create Table: CREATE TABLE `test1` (
  `address` varchar(30) NOT NULL,
  `s_id` int(11) NOT NULL DEFAULT '0',
  `s_sex` char(3) NOT NULL,
  `name` char(5) DEFAULT NULL,
  `birth` date DEFAULT NULL,
  PRIMARY KEY (`s_id`),
  UNIQUE KEY `birth` (`birth`)
) ENGINE=MEMORY DEFAULT CHARSET=utf8
1 row in set (0.00 sec)

mysql> alter table test1 engine=memory1;
Query OK, 0 rows affected, 1 warning (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 1

mysql> show warnings;
+---------+------+----------------------------------+
| Level   | Code | Message                          |
+---------+------+----------------------------------+
| Warning | 1286 | Unknown storage engine 'memory1' |
+---------+------+----------------------------------+
1 row in set (0.00 sec)
```

## 删除数据表

drop	table	表1 [,表2...]

```
mysql> create table example6( id int primary key, name varchar(30) not null, sex char(3) not null, address varchar(30) unique);
Query OK, 0 rows affected (0.00 sec)
mysql> create table example7(s_id int,name varchar(30) not null,constraint fk_ex7 foreign key (s_id) references example6(id));
Query OK, 0 rows affected (0.01 sec)
mysql> drop table example6;
ERROR 1217 (23000): Cannot delete or update a parent row: a foreign key constraint fails

```

解除外键约束关系

alter	table	表名	drop	foreign	key	外键约束名

```
mysql> alter table example7 drop foreign key fk_ex7;
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0
mysql> drop table example6;
Query OK, 0 rows affected (0.00 sec)
```

查看表在哪个库中

```
mysql> use information_schema;
mysql> select * from tables\G 
mysql> select table_schema from information_schema.tables where table_name='example4';

```

查看外键约束条件在哪个库的哪个表中

```
mysql> use information_schema;
mysql> show tables;
mysql> select * from TABLE_CONSTRAINTS\G
mysql> select * from table_constraints where constraint_type='foreign key';
mysql> select * from table_constraints where constraint_type='foreign key'\G
*************************** 1. row ***************************
CONSTRAINT_CATALOG: def
 CONSTRAINT_SCHEMA: sjk
   CONSTRAINT_NAME: fk_ex5
      TABLE_SCHEMA: sjk
        TABLE_NAME: example5
   CONSTRAINT_TYPE: FOREIGN KEY
1 row in set (0.01 sec)

```

## 							删除主键（添加主键）

alter table 表名	drop	primary	key

```
mysql> desc example1;
+--------+-------------+------+-----+---------+-------+
| Field  | Type        | Null | Key | Default | Extra |
+--------+-------------+------+-----+---------+-------+
| s_id   | int(11)     | NO   | PRI | NULL    |       |
| s_name | varchar(30) | YES  |     | NULL    |       |
| s_sex  | char(3)     | YES  |     | NULL    |       |
+--------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec)
mysql> alter table example1 drop primary key;
mysql> desc example1;
+--------+-------------+------+-----+---------+-------+
| Field  | Type        | Null | Key | Default | Extra |
+--------+-------------+------+-----+---------+-------+
| s_id   | int(11)     | NO   |     | NULL    |       |
| s_name | varchar(30) | YES  |     | NULL    |       |
| s_sex  | char(3)     | YES  |     | NULL    |       |
+--------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec)

mysql> show create table example1\G
*************************** 1. row ***************************
       Table: example1
Create Table: CREATE TABLE `example1` (
  `s_id` int(11) NOT NULL,
  `s_name` varchar(30) DEFAULT NULL,
  `s_sex` char(3) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8
1 row in set (0.00 sec)
mysql> alter table example1 add primary key(s_id);   #添加主键
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0
mysql> show create table example1\G
*************************** 1. row ***************************
       Table: example1
Create Table: CREATE TABLE `example1` (
  `s_id` int(11) NOT NULL,
  `s_name` varchar(30) DEFAULT NULL,
  `s_sex` char(3) DEFAULT NULL,
  PRIMARY KEY (`s_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
1 row in set (0.00 sec)
mysql> alter table example1 modify s_id int primary key;	添加主键
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0
```

删除唯一性约束条件（添加唯一性约束条件）

alter table	表名	drop	key	birth;

alter table 表名	change birth birthday  date unique;

alter table 表名	add  constraint	ex1_uni	unique (name);

```
mysql> alter table test1 drop key birth;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> alter table test1 change birth birthday date unique;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0
mysql> alter table test1 add constraint te1_uni unique(name);
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0


mysql> create table test2(id int primary key, name varchar(30) not null, phone int unique, address char(20) not null);
Query OK, 0 rows affected (0.01 sec)

mysql> create table test3(s_id int,s_name varchar(30) not null);
Query OK, 0 rows affected (0.01 sec)

mysql> alter table test3 add constraint fk_te3 foreign key(s_id) references test2(id);
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0
```

删除自增（添加自增）

create table	example modify	id int auto_increment

删除非空（添加）

```
mysql> create table example2(id int primary key,
    -> name varchar(30),
    -> address varchar(30));
Query OK, 0 rows affected (0.00 sec)

mysql> desc example2;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| id      | int(11)     | NO   | PRI | NULL    |       |
| name    | varchar(30) | YES  |     | NULL    |       |
| address | varchar(30) | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec)
mysql> alter table example2 modify name varchar(30) not null;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc example2;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| id      | int(11)     | NO   | PRI | NULL    |       |
| name    | varchar(30) | NO   |     | NULL    |       |
| address | varchar(30) | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
3 rows in set (0.00 sec)
```

删除默认值（添加）



添加主键和唯一性约束条件时，既可以通过ad方式来添加，有可以通过modify（change）方式添加，因为主键和唯一性约束条件拥有两种建立的方式，外键仅能通过add方式添加，因为外键只有这一种建立的语法，且语法必须另起一行写在新的行中

自增，默认值，非空三大约束条件只有一种添加方式，且该方式为跟随在数据类型后面添加，所以，只能通过modify（change）方式进行添加，如果想要删除出上述三种约束条件，在修改数据类型时，不带有该约束条件，将会自动删除，但是外键、主键、唯一性约束条件不会随着不带该约束条件而被删除，需要特殊命令进行删除。

## 									数据类型

表中每个字段有且只有一个数据类型与其对应，一旦确定了数据类型，那么就决定了向该字段写入数据的格式

数据类型分为

```
1.数值类数据类型
（1）整数类型		说明				存储需求		有符号取值范围
tinyint		极小的整数类型			1字节			-128~127
smallint	较小的整数类型			2字节			-32768~32767
mediumint	中等大小的数据类型		3字节		-8388608~8388607
int			普通整数类型			4字节		-2147483648~2147483647
bigint		较大整数类型			8字节		-9223372036854775808~9223372036854775807
		无符号取值范围
	（1）0~255
	（2）0~65535
	（3）0~16777215
	（4）0~4294967295
	（5）0~18446744073709551615
	在数值数据类型写入的过程中，每个数据类型默认为有符号取值范围，如果想要无符号取值范围
	语法	字段名	数值类数据类型	unsigned
	
（2）小数类型 	M为精度，表示一共可以保留的位数（含小数），N为标度，表示保留的小数位数
	1）浮点类型
	类型			说明			存储需求
	float（M,N）	单精度浮点数		4字节
	double（M,N）	双精度浮点数		8字节
	2）定点数类型
	类型
	decimal（M，N）	定点数		M+2字节
	浮点数与定点数的区别，浮点数拥有更大的取值范围，但是由于取值范围过大，会造成精度不准确问题。而定点数实际按照字符串的形式进行存放数据，对于数据的要求更加精确，但是确定为范围不够大，只能在精度范围活跃，主要用于（货币运算，科学计算等方面）
2.时间日期类类型
3.字符串类型
```

